@@include("partials/main.html")
    <head>
        @@include("partials/title-meta.html", {"title": "Fineguide | Demo Preview", "description": "Preview how Fineguide AI agents will look and function on your website with our interactive demo tool."})

        <!-- Css -->
        @@include("partials/head-css.html")
        <style>
            .iframe-container {
                /* width: 100%; */
                height: 85vh;
                border: none;
                overflow: hidden;
                background-color: #fff;
                transition: all 0.3s ease;
                margin-top: 0;
                position: relative;
                margin: 0 20px;
            }
            .iframe-container iframe {
                width: 100%;
                height: 100%;
                border: none;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }
            .url-input {
                border: 2px solid rgba(94, 53, 177, 0.3);
                transition: all 0.3s ease;
            }
            .url-input:focus {
                border-color: #5E35B1;
                box-shadow: 0 0 0 3px rgba(94, 53, 177, 0.2);
            }
            .preview-btn {
                background: linear-gradient(to right, #2b1869, #5E35B1);
            }
            .preview-btn:hover {
                background: linear-gradient(to right, #231456, #4E2D96);
            }
        </style>
    </head>
    
    @@include("partials/body.html")
        
        @@include("partials/navbar/nav.html")
        
        <!-- Start Demo Section -->
        <section class="relative lg:pt-24 pt-16 pb-0">
            <span class="fixed blur-[200px] w-[500px] h-[500px] rounded-full top-[25%] -start-[20%] bg-gradient-to-tl to-indigo-800  from-purple-600 -z-1"></span>
            <span class="fixed blur-[200px] w-[500px] h-[500px] rounded-full bottom-[25%] -end-[20%] bg-gradient-to-tl to-indigo-800  from-purple-600 -z-1"></span>

            <div class="container">
                <div class="grid grid-cols-1 pb-6 text-center">
                    <h3 class="mb-4 md:text-3xl text-2xl md:leading-normal leading-normal font-semibold">Interactive Demo Preview</h3>
                    <p class="text-slate-400 max-w-xl mx-auto">Enter your website URL below to see how Fineguide AI agents will appear and function on your site.</p>
                </div>

                <div class="grid md:grid-cols-3 grid-cols-1 gap-6 mb-8">
                    <div class="p-6 rounded-md border border-gray-100 dark:border-gray-800 bg-white dark:bg-slate-900 shadow dark:shadow-gray-800 text-center hover:shadow-lg transition-all duration-300">
                        <div class="w-20 h-20 bg-amber-400/10 text-amber-400 rounded-full flex items-center justify-center mb-5 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                            </svg>
                        </div>
                        <h5 class="text-lg font-semibold mb-3">Enter Your URL</h5>
                        <p class="text-slate-400">Paste your website URL in the field above to see a live preview.</p>
                    </div>
                    
                    <div class="p-6 rounded-md border border-gray-100 dark:border-gray-800 bg-white dark:bg-slate-900 shadow dark:shadow-gray-800 text-center hover:shadow-lg transition-all duration-300">
                        <div class="w-20 h-20 bg-amber-400/10 text-amber-400 rounded-full flex items-center justify-center mb-5 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <h5 class="text-lg font-semibold mb-3">See the Preview</h5>
                        <p class="text-slate-400">View your website with the Fineguide AI agent integrated.</p>
                    </div>
                    
                    <div class="p-6 rounded-md border border-gray-100 dark:border-gray-800 bg-white dark:bg-slate-900 shadow dark:shadow-gray-800 text-center hover:shadow-lg transition-all duration-300">
                        <div class="w-20 h-20 bg-amber-400/10 text-amber-400 rounded-full flex items-center justify-center mb-5 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <h5 class="text-lg font-semibold mb-3">Get Started</h5>
                        <p class="text-slate-400">Ready to implement? <a href="https://app.fineguide.ai/register" class="text-amber-500 hover:text-amber-600 font-medium">Sign up</a> to add AI agents to your site.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 mt-8">
                    <div class="bg-white dark:bg-slate-900 rounded-md shadow dark:shadow-gray-800 p-6 mb-6">
                        <form id="demoForm" class="flex flex-col md:flex-row items-end gap-4">
                            <div class="flex-1">
                                <label for="websiteUrl" class="font-semibold mb-2 block">Your Website URL:</label>
                                <input type="url" id="websiteUrl" name="websiteUrl" placeholder="https://example.com" 
                                    class="form-input url-input w-full py-2 px-3 h-10 bg-transparent dark:bg-slate-900 dark:text-slate-200 rounded outline-none focus:ring-0"
                                    required>
                            </div>
                            <div class="md:w-auto w-full">
                                <button type="submit" id="previewBtn" class="preview-btn w-full py-2 px-6 inline-block font-semibold tracking-wide border align-middle duration-500 text-base text-center border-purple-700 text-white rounded-md h-10">
                                    Preview
                                </button>
                            </div>
                        </form>
                    </div>

                </div><!--end container-->
            </div><!--end grid-->
            
            <div class="bg-white dark:bg-slate-900 border-l-4 border-purple-600 p-5 mx-auto my-4 rounded-md shadow-sm" style="max-width: 95%;">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center shadow-sm">
                            <svg class="h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-base font-semibold text-slate-800 dark:text-white">Disclaimer</p>
                        <p class="text-base text-slate-600 dark:text-slate-300 mt-2 leading-relaxed">This is a demonstration only. The original website is not affected in any ways. The AI agent may respond slower than in a production environment. Some websites may not work as expected.</p>
                    </div>
                </div>
            </div>
            
            <div class="iframe-container" id="previewContainer">
                <div class="flex items-center justify-center h-full bg-gradient-to-b from-slate-900 to-indigo-950">
                    <div class="text-center p-8 max-w-lg">
                        <div class="w-20 h-20 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/20">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-3">Enter a URL above to preview</h3>
                        <p class="text-indigo-200 mt-2 mb-6">See how Fineguide AI agents will appear and function on your website</p>
                        <div class="flex justify-center">
                            <div class="animate-pulse flex space-x-1">
                                <div class="w-2 h-2 rounded-full bg-purple-400"></div>
                                <div class="w-2 h-2 rounded-full bg-purple-400" style="animation-delay: 0.2s"></div>
                                <div class="w-2 h-2 rounded-full bg-purple-400" style="animation-delay: 0.4s"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div><!--end container-->
        </section><!--end section-->
        <!-- End Demo Section -->

        @@include("partials/footer/footer.html")

        <!-- JAVASCRIPTS -->
        @@include("partials/script-file.html")
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const demoForm = document.getElementById('demoForm');
                const previewContainer = document.getElementById('previewContainer');
                const websiteUrl = document.getElementById('websiteUrl');
                
                // Check if URL parameter is provided
                const urlParams = new URLSearchParams(window.location.search);
                const urlFromParams = urlParams.get('url');
                
                // If URL parameter exists, populate the input field and trigger preview
                if (urlFromParams) {
                    let url = urlFromParams.trim();
                    
                    // Add https:// if no protocol is specified
                    if (!/^https?:\/\//i.test(url)) {
                        url = 'https://' + url;
                    }
                    
                    // Set the input field value
                    websiteUrl.value = url;
                    
                    // Trigger the preview
                    loadPreview(url);
                }
                
                // Function to load preview based on URL
                function loadPreview(url) {
                    // Validate URL
                    try {
                        new URL(url);
                        
                        // Extract domain without protocol
                        const domain = url.replace(/^https?:\/\//i, '');
                        
                        // Extract company name from domain (use domain name before first dot)
                        const company = domain.split('.')[0];
                        
                        // Create iframe loading the iframe-demo.html with the URL and company parameters
                        previewContainer.innerHTML = `
                            <iframe src="iframe-demo.html?search_domains=${encodeURIComponent(domain)}&company=${encodeURIComponent(company)}" title="Website Preview with Fineguide Agent" allow="microphone" allowfullscreen frameborder="0"></iframe>
                        `;
                        
                        // Scroll to the preview container with smooth animation, accounting for sticky header
                        setTimeout(() => {
                            // Get the height of the sticky header
                            const navbarHeight = document.getElementById('topnav').offsetHeight;
                            
                            // Calculate the position to scroll to (element position - navbar height - extra padding)
                            const elementPosition = previewContainer.getBoundingClientRect().top + window.pageYOffset;
                            const offsetPosition = elementPosition - navbarHeight - 20;
                            
                            // Scroll to the adjusted position
                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth'
                            });
                        }, 100);
                        
                        return true; // URL is valid
                    } catch (e) {
                        // Invalid URL
                        previewContainer.innerHTML = `
                            <div class="flex items-center justify-center h-full bg-red-50">
                                <div class="text-center p-6">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-red-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                    </svg>
                                    <h3 class="text-xl font-semibold text-red-700">Invalid URL</h3>
                                    <p class="text-red-500 mt-2">Please enter a valid website URL</p>
                                </div>
                            </div>
                        `;
                        
                        return false; // URL is invalid
                    }
                }
                
                // Handle form submission
                demoForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    
                    let url = websiteUrl.value.trim();
                    
                    // Add https:// if no protocol is specified
                    if (!/^https?:\/\//i.test(url)) {
                        url = 'https://' + url;
                        websiteUrl.value = url;
                    }
                    
                    // Load the preview
                    loadPreview(url);
                });
            });
        </script>
        <!-- JAVASCRIPTS -->
    </body>
</html>
